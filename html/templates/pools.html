<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>{{ .title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ $.BasePath }}/static/styles.css">
</head>
<body>
  <header>
    <div class="container">
      <h1>{{ .title }}</h1>
    </div>
  </header>

  <main>
    <div class="container">
      <section class="card">
        <p><a href="{{ $.BasePath }}/" class="link-back">Zurück zur Startseite</a></p>
      </section>

      <section class="status">
        {{ if .error }}
        <div class="alert alert-error">{{ .error }}</div>
        {{ end }}

        {{ if .message }}
        <div class="alert alert-success">{{ .message }}</div>
        {{ end }}

        {{ if .result }}
          <div class="alert alert-info">
            <p>{{ .result }}</p>
            {{ if .poolName }}
              <p>Pool: <a href="{{ $.BasePath }}/pools/{{ .poolName }}">{{ .poolName }}</a></p>
              <p>Kommentar: {{ .comment }}</p>
            {{ end }}
          </div>
        {{ end }}
      </section>

      <section class="card">
        <h2>Verfügbare Pools</h2>

        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Pool Name</th>
                <th scope="col">Aktion</th>
              </tr>
            </thead>
            <tbody>
            {{ range .pools }}
              <tr>
                <td><a href="{{ $.BasePath }}/pools/{{ . }}" class="link-item">{{ . }}</a></td>
                <td>
                  <form method="post" action="{{ $.BasePath }}/pools/{{ . }}/delete" onsubmit="return confirm('Das löscht den gesamten Pool! Sicher?');">
                    <button type="submit" class="btn-danger">gesamten Pool Löschen</button>
                  </form>
                </td>
              </tr>
            {{ else }}
              <tr>
                <td colspan="2" class="table-empty">Keine Einträge vorhanden.</td>
              </tr>
            {{ end }}
            </tbody>
          </table>
        </div>
      </section>
        <section class="card">
          <h2>Blockliste hochladen</h2>
          <p class="hint">Unterstütztes Format: Konfigurationsdatei mit IP-Einträgen (.conf)</p>
          <form method="post" action="{{ $.BasePath }}/pools/upload" enctype="multipart/form-data">
            <div class="field-group">
              <label for="file">Datei auswählen</label>
              <input type="file" id="file" name="file" accept=".conf">
            </div>
            <button type="submit">Hochladen</button>
          </form>
      </section>
        <section class="card">
          <h2>reset DB</h2>
          <form method="post" action="{{ $.BasePath }}/reset" onsubmit="return confirm('Das leert die gesamte Datenbank und lädt die Apache-Blocklisten neu ein! Sicher?');">
            <button type="submit">RESET</button>
          </form>
      </section>
</div>

    </div>
  </main>
</body>
</html>

